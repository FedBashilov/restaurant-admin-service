version: '3.5'
name: menu_service

services:
    web.facade:
        container_name: menu_webfacade
        image: menu_webfacade
        ports:
            - "5291:80"
        build: '../'
        environment:
            ConnectionStrings__DatabaseConnection: 'Data Source=menu_db; Initial Catalog=MenuService; User ID=SA; Password=Adminadmin1@'
        depends_on:
            - db
        networks:
            - app_bridge_network
    db:
        image: "mcr.microsoft.com/mssql/server:2019-latest"
        container_name: menu_db
        ports:
            - "1434:1433"
        environment:
            - ACCEPT_EULA=y
            - MSSQL_SA_PASSWORD=Adminadmin1@
        networks:
            - app_bridge_network

networks:
    app_bridge_network:
        name: app_bridge_network
        driver: bridge
        external: true